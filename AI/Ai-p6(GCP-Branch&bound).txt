# Graph Coloring using Branch and Bound

def is_safe(node, color, graph, colors):
    for neighbor in range(len(graph)):
        if graph[node][neighbor] == 1 and colors[neighbor] == color:
            return False
    return True

def graph_coloring(node, graph, m, colors, n):
    # If all nodes are assigned a color -> solution found
    if node == n:
        return True

    # Try assigning each color
    for color in range(1, m+1):
        if is_safe(node, color, graph, colors):
            colors[node] = color  # assign color

            # Recur to assign colors to next vertex
            if graph_coloring(node + 1, graph, m, colors, n):
                return True

            # Branch & Bound: remove assignment (Backtrack)
            colors[node] = 0

    return False

# ---- MAIN PROGRAM ----
if __name__ == "__main__":
    # Example Graph (Undirected)
    # 0--1
    # | /
    # 2--3
    graph = [
        [0,1,1,0],
        [1,0,1,0],
        [1,1,0,1],
        [0,0,1,0]
    ]

    n = len(graph)
    m = int(input("Enter number of colors: "))

    colors = [0] * n  # initially no vertex is colored

    if graph_coloring(0, graph, m, colors, n):
        print("\nColoring Possible!")
        for i in range(n):
            print(f"Vertex {i} ---> Color {colors[i]}")
    else:
        print("\nNo valid coloring exists with", m, "colors.")
